<meta charset="utf-8">
<title>Force-Directed Graph</title>
<script src="http://d3js.org/d3.v3.min.js"></script>
<body>
	<script> // code ref: http://www.ourd3js.com/demo/rm/R-9.2/force.html?fbclid=IwAR0vkUa2cIfMUvoqAC6qgH55eX9ZJW2hFPV9zWeg1m3RtUeUy__TD7vJRA8
		nodes = [{name: "桂林"}, {name: "廣州"}, {name: "廈門"}, {name: "杭州"}, {name: "上海"}, {name: "青島"}, {name: "天津"}]
		edges = [{source: 0, target: 1}, {source: 0, target: 2}, {source: 0, target: 3}, {source: 1, target: 4}, {source: 1, target: 5}, {source: 1, target: 6}]
		w = document.body.offsetWidth
		h = document.body.offsetHeight
		svg   = d3.select("body").append("svg").attr("width",w).attr("height",h)
		force = d3.layout.force().nodes(nodes).links(edges).size([w,h]).linkDistance(Math.min(w,h)/4).charge(-Math.max(w,h)/4)
		force.start()
		color = d3.scale.category20()
		svg_edges = svg.selectAll("line"  ).data(edges).enter().append("line"  ).style("stroke","#ccc").style("stroke-width",1)		
		svg_nodes = svg.selectAll("circle").data(nodes).enter().append("circle").style("fill"  ,(_ , i)=>color(i)).attr("r",20).call(force.drag)
		svg_texts = svg.selectAll("text"  ).data(nodes).enter().append("text"  ).style("fill"  ,"#000").attr("dx", 20).attr("dy", 8).text((_)=>_.name)
		force.on("tick",()=>{
			svg_edges.attr("x1",(_)=>_.source.x).attr("y1",(_)=>_.source.y).attr("x2",(_)=>_.target.x).attr("y2",(_)=>_.target.y)
			svg_nodes.attr("cx",(_)=>_.x).attr("cy",(_)=>_.y)
			svg_texts.attr( "x",(_)=>_.x).attr( "y",(_)=>_.y)
		})
	</script>
</body>